<div class="page-wrapper">
    <header class="top-header">
    <div class="logo-container">
        <img src="logo.svg" alt="Logo" class="logo">
    </div>
    <div class="user-actions">
        <span>Olá!</span>
        <button class="logout-button" (click)="logout()" title="Sair">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
        </button>
    </div>
    </header>

    <main class="home-container">
    <div class="content-card">
        <h1>Solicitações</h1>
            <form class="search-bar" [formGroup]="searchForm" (ngSubmit)="onSearch()">
            <app-input
                class="search-input"
                type="text"
                controlName="query"
                [formGroup]="searchForm"
                placeholder="Pesquisar pelo nome">
            </app-input>
            
            <button class="search-button" type="submit" aria-label="Pesquisar">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="11" cy="11" r="8"></circle>
                    <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                </svg>
            </button>
        </form>
        <div class="divider"></div>
        <div class="refund-list">
            <div *ngIf="paginatedRefunds.length === 0" class="empty-state">
                <p>Nenhuma solicitação encontrada.</p>
            </div>

            <div *ngFor="let refund of paginatedRefunds" class="refund-item" (click)="viewDetails(refund)">
                <div class="category-icon" [innerHTML]="getCategoryIcon(refund.category)"></div>
                <div class="refund-details">
                    <h3>{{ refund.userName }}</h3> 
                    <p>{{ refund.category.name || 'Sem categoria' }}</p>
                </div>
                <!-- <div class="refund-status" [ngClass]="'status-' + getRefundStatus(refund.status).toLowerCase()">
                    {{ getRefundStatus(refund.status) }}
                </div> -->
                <div class="refund-amount">
                    {{ refund.value | currency:'BRL' }}
                </div>
                <!-- <div class="refund-actions">
                    <button class="action-btn approve">Aprovar</button>
                    <button class="action-btn reject">Recusar</button>
                </div> -->
            </div>
        </div>

        <div class="pagination-controls" *ngIf="totalPages > 1">
            <button class="pagination-button" (click)="previousPage()" [disabled]="currentPage === 1">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>
            </button>
            <span class="page-info">{{ currentPage }} / {{ totalPages }}</span>
            <button class="pagination-button" (click)="nextPage()" [disabled]="currentPage === totalPages">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>
            </button>
        </div>
    </div>
    </main>
</div>